new class{TOTAL_MEMORY=268435456;noInitialRun=!0;SRM_POS=658768;SRM_LEN=131072;SRM_XLEN=139264;ROOM_POS=6647264;STATE_POST=8787512;CanvasWidth=600;CanvasHeight=400;arguments=[];preRun=[];postRun=[];print=t=>{};printErr=t=>{};totalDependencies=0;monitorRunDependencies=t=>{};onRuntimeInitialized=t=>{};preMainLoop=t=>{};constructor(t){t.Module=this}}(NengeApp),new class{constructor(t){this.Module=t.Module,t.KEY=this;for(let t in this.KeyMap){if("length"==t)continue;let e=this.KeyMap[t].toLowerCase();this._NumToKey[t]=e,this._NumState[t]=0,this._KeyToNum[e]=t}t.CONFIG.KeyCode?this._KeyCode=t.CONFIG.KeyCode:this.resetKeyBoard()}_NumToKey={};_KeyToNum={};_NumState={};SetState(t){for(let e in this._NumState)t[e]?(this._NumState[e]=1,this.sendState(e,1)):0!=this._NumState[e]&&(this._NumState[e]=0,this.sendState(e,0));t=null}clearState(){for(var t in this._NumState)this._NumState[t]=0;return{}}SendKey(t,e){null!=(t=this._KeyToNum[t.toLowerCase()])&&this.SetState(t,e)}sendState(t,e){this.Module.cwrap("simulate_input","null",["number","number","number"])(0,t,e)}get(t){return this._KeyToNum[t.toLowerCase()]}resetKeyBoard(){let t=this.Keyboard;this._KeyCode={};for(let e=0;e<t.length;e++){let t=this.Keyboard[e];this._KeyCode[t]=this._KeyToNum[this.KeyboardIndex[e%10]]}return this._KeyCode}KeyCodetoArr(){let t=Array(20);for(var e in this._KeyCode){let a=this._KeyCode[e],s=this._NumToKey[a],n=this.KeyboardIndex.indexOf(s);t[n]?t[n+10]=e:t[n]=e}return t}ELMsetKeyBoard(){let t={};return document.querySelectorAll("[data-key-index]").forEach((e=>{let a=e.getAttribute("data-key-index");t[e.value]=this._KeyToNum[this.KeyboardIndex[Number(a)%10]]})),this._KeyCode=t,t}Keyboard=["Numpad2","Numpad1","Numpad0","NumpadDecimal","ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Numpad6","Numpad3","KeyU","KeyY","KeyH","KeyJ","KeyD","KeyA","KeyW","KeyS","KeyT","KeyI"];KeyboardIndex=["a","b","select","start","right","left","up","down","r","l"];KeyGamePad={0:8,1:0,2:2,3:3,4:"加速",5:"切换",6:"即读",7:"即存",8:null,9:null,10:null,11:null,12:4,13:5,14:6,15:7,16:null,17:null};KeyGamePadMap={0:"✘:A",1:"◉:B",2:"▢:X",3:"△:Y",4:"L1:LB",5:"R1:RB",6:"L2:LT",7:"R2:RT",8:"SHARE:截屏",9:"OPTION",10:"L3:L摇杆",11:"R3:R摇杆",12:"UP",13:"DOWN",14:"LEFT",15:"RIGHT",16:"PS",17:"触摸板"};KeyMap={0:"B",1:"Y",2:"SELECT",3:"START",4:"UP",5:"DOWN",6:"LEFT",7:"RIGHT",8:"A",9:"X",10:"L",11:"R",12:"L2",13:"R2",14:"L3",15:"R3",19:"L STICK UP",18:"L STICK DOWN",17:"L STICK LEFT",16:"L STICK RIGHT",23:"R STICK UP",22:"R STICK DOWN",21:"R STICK LEFT",20:"R STICK RIGHT",length:21}}(NengeApp),new class{constructor(t){t.ELM=this,this.config=e=>t.CONFIG[e],this.config("do-hideui")&&document.querySelector(".gba-ctrl").classList.add("hideui")}BAIDU_HTML(t){return`<div class="gba-translate-set"><h3>翻译API 目前使用百度</h3><p>申请地址:<a href="https://api.fanyi.baidu.com/product/22">https://api.fanyi.baidu.com/product/22</a></p><p>申请成功后点击<a href="https://api.fanyi.baidu.com/manage/developer">开发者信息</a></p><p><label>APPID:<input type="text" class="gba-translate-id" tabindex="1" value="${t.id||""}"></label></p><p><label>密 钥：<input type="text" class="gba-translate-key" tabindex="2" value="${t.key||""}"></label></p><p><label>来 源：<input type="text" class="gba-translate-from" tabindex="3" value="${t.from||"auto"}"></label></p><p><label>目 标：<input type="text" class="gba-translate-to" tabindex="4" value="${t.to||"zh"}"></label></p><p><label>跨域：<input type="text" class="gba-translate-host" tabindex="5" value="${t.host||"https://api.nenge.net/translateBaidu.php"}"></label><br>https://api.nenge.net/translateBaidu.php</p><p><label><button data-btn="translate-save">保存</button></p><p>跨域服务器由能哥网自由服务提供（使用期限不确定！），如果有服务器资源的朋友，可以自己搭建下方是PHP代码！百度翻译月免费1万次，多出部分四毛钱一次！</p><h3>translateBaidu.php</h3><textarea><?php\nheader("Access-Control-Allow-Origin:*"); \nheader("Content-type: text/html; charset=utf-8");\nerror_reporting(E_ALL & ~E_NOTICE);\nclass NengeApp{\n    function __construct(){\n        $this->API = array(\n            "baidu" => array (\n                "txt"=>"https://fanyi-api.baidu.com/api/trans/vip/translate?",\n                "img"=>"https://fanyi-api.baidu.com/api/trans/sdk/picture?"\n            )\n        );\n        $this->getRequest(empty($_GET["q"])&&isset($_FILES["image"]) ? "POST":"GET","baidu");\n    }\n    function getRequest($method="GET",$sitename,$timeout = 20){\n        $isGET = $method=="GET" ;\n        $query =$_SERVER["QUERY_STRING"];\n        $url = $this->API[$sitename][$isGET?"txt":"img"];\n        $ssl = parse_url($url)["scheme"] == "https" ? false : null;\n        $bodyDate = array();\n        foreach($_POST as $k=>$v){\n            $bodyDate[$k] = $v;\n        }\n        foreach($_FILES as $k=>$v){\n            $bodyDate[$k] = new CURLFile($v["tmp_name"],$v["type"],$v["name"]);//"@".$v["tmp_name"].";type=".$v["type"].";filename=".$v["name"];\n        }\n        $curlObj = curl_init();\n        $options = [\n            CURLOPT_URL => $url.$query,\n            CURLOPT_RETURNTRANSFER => 1,\n            CURLOPT_FOLLOWLOCATION => 1,\n            CURLOPT_AUTOREFERER => 1,\n            CURLOPT_USERAGENT => "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36",\n            CURLOPT_TIMEOUT => $timeout,\n            //CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_0,\n            //请求头\n            CURLOPT_HTTPHEADER => array(\n                "User-Agent"      => "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) baidu-music/1.2.1 Chrome/66.0.3359.181 Electron/3.0.5 Safari/537.36",\n                "Accept"          => "*/*",\n                //"text/html;charset=UTF-8",\n                "Content-type"    => "application/json;charset=UTF-8",\n                "Accept-Language" => "zh-CN",\n            ),\n            //IP4\n            CURLOPT_IPRESOLVE => CURL_IPRESOLVE_V4,\n            //CURLOPT_REFERER => isset($api["refer"])?$api["refer"]:$url_info["host"], //伪造来路\n            //CURLOPT_COOKIEFILE=>dirname(__FILE__)."/kugou.cookies.txt",\n            //CURLOPT_COOKIEJAR=>dirname(__FILE__)."/kugou.cookies.txt",\n            CURLOPT_POST=>$isGET ?false:true,\n            CURLOPT_POSTFIELDS => $isGET? null:$bodyDate,\n            CURLOPT_SSL_VERIFYHOST => $ssl,\n            CURLOPT_SSL_VERIFYPEER => $ssl,\n            CURLOPT_COOKIE=>null,\n        ];\n        //print_r($options);exit;\n        curl_setopt_array($curlObj, $options);\n        $returnData = curl_exec($curlObj);\n        if (curl_errno($curlObj)) {\n            //error message\n            $returnData = curl_error($curlObj);\n        }\n        curl_close($curlObj);\n        echo $returnData;\n    }\n}\nnew NengeApp();\n?></textarea></div>`}ROOMS_LIST(t,e){let a="rooms"==(e=e||"rooms")?'<p><button type="button" data-btn="rooms-upload">添加游戏</button></p><p>vbanext-wasm.7z为运行核心文件,不可删除!如果出现奇异问题可以尝试删除!</p>':'<p><button data-btn="state-clear">清空本游戏状态</button></p><p><button data-btn="state-allclear">清空所有游戏即时状态</button></p>',s="";for(let a in t){let n=t[a],i=` data-keyname="${n.name}"`;s+=`<div class="gba-roomslist" ${i}><h3>${n.title||n.name}</h3><img src="${n.img?`data:image/jpeg;base64,${window.btoa(String.fromCharCode.apply(null,n.img))}`:"icon/gba2.png"}" title="${n.name}" alt="${a}"><p>${n.time.toLocaleString()}</p><p class="gba-result-roomctr"><button type="button" data-btn="${e}-load" ${i}>${n.title?"读取":"打开"}</button> | <button type="button" data-btn="${e}-down" ${i}>下载</button>${n.title?"":` | <button type="button" data-btn="${e}-delete" ${i}>删除</button>`}</p></div>`}return`${a}<div class="gba-rooms">${s}</div>${a}`+this.ABOUT}KEY_HTML(t,e){let a='<div class="gba-keyMap"><h3>键位 ESC加速 Backspace重启 TAB 翻译 F1读取 F4记录</h3><table border="1" class="gba-table"><tr><th>键位</th><th>键值</th><th>键值</th></tr>',s=e=>`<td><input type="text" value="${t[e]}" data-key-index="${e}" tabindex="${e+1}" required></td>`;for(let t=0;t<e.length;t++)a+=`<tr><td>${e[t].toLocaleUpperCase()}</td>${s(t)+s(t+10)}</tr>`;return a+='</table><button type="button" data-btn="key-save">保存键值</button> | |<button type="button" data-btn="key-reset">恢复默认</button></div>',a}GAMEPAD_HTML(t,e,a){let s='<div class="gba-flex" style="align-items: flex-start;"><div class="gba-list-pad"><h3>手柄参数,基于我的廉价PS4手柄（百元不到）</h3><table border="1" class="gba-table"><tr><th>键位</th><th>键值</th></tr>';for(let a in e){if("length"==a)continue;let n=Number(a)+1;s+=`<tr><td>${e[a]}</td><td><input type="text" value="${t[a]}" data-gamepad-index="${a}" tabindex="${n}" required></td></tr>`}let n=0;return s+`</table></div><div class="gba-list-pad">${Array.from(a,(t=>t.toLowerCase()+"=>"+n++)).join("<br>")}</div></div>`}NOTGBA_HTML(t){return`<p class="gba-notgba">${t}<b>不是GBA文件</b></p>`}RAR_HTML(t){return`<div class="gba-rar"><h3>${t}</h3><p><input value="" class="gba-rar-password" placeholder="输入密码 Enter password"></p><p><button data-btn="unrar">解压 Uncompress</button> | <button data-btn="exitrar">取消 Cancel</button></p><p class="gba-tl"><b>Uncaught Missing password:</b>需要密码</p><p class="gba-tl"><b>Uncaught File CRC error:</b>密码可能不正确！ password erro!</p></div>`}get MENU_HTML(){let t="",e=(t,a)=>{let s="",n=this.config(t);if("string"==typeof a)s+=`<button type="button" data-btn="${t}"${n?' class="active"':""}>${a}</button>`;else if(a instanceof Array){if("radio"==a[0]){s+=` <div class="gba-w100m5">${t}:`;for(let t=a[3];t<a[4];t++)s+=`<label><input type="${a[0]}" name="${a[1]}" value="${t}" data-state-key="${t}" ${this.config(a[1])==t?"checked = true":""}>${a[2]}${t}</label>`;s+="</div>"}else if("option"==a[0]){let e=this.config(t);for(let n=1;n<a.length;n++){let i=a[n],l=e&&e.includes(i[1])?' class="active"':"";i&&(s+=`<button type="button" data-btn="${t}" data-${a[0]}="${i[1]}" ${l}>${i[0]}</button>`)}}}else{s+=` <div class="gba-w50m5">${t}:`;for(let t in a)s+=e(t,a[t])+"&nbsp;&nbsp;&nbsp;";s+="</div>"}return s};for(let a in this.MENU_DATA){t+=`<h3 class="gba-w100m5">${a}</h3><div class="gba-w100m5 gba-flex">`;let s=this.MENU_DATA[a];if(s instanceof Array)t+=e(key,s);else for(let a in s)t+=e(a,s[a]);t+="</div>"}return t+this.ABOUT}MENU_DATA={"数据":{"rooms-show":"游戏列表","state-show":"即时存档","rooms-save":"储存快照"},"操作":{"do-forward":"加速游戏","cheat-show":"作弊代码","rooms-upload":"添加游戏","do-downscreen":"下载截图","translate-show":"翻译API","key-key":"键位设置","key-gamepad":"手柄设置","do-getinfo":"信息下载","do-sw":"离线开关","do-loop":"画面继续","do-hideui":"UI开关","do-record":"录制视频"},"文件处理":{"游戏":{"state-load":"即读","state-save":"即存","translate-load":"翻译"},"重设":{"do-reset":"重启","do-music":"音乐","do-reload":"刷新"},"存档":{"srm-up":"载入","srm-down":"下载","srm-down128":"128K"},"即时":{"state-up":"载入","state-down":"下载"},"档位":["radio","stateKey","位置",0,3]},"屏幕":{"do-shader":["option",["2倍柔化","2xScaleHQ.glsl"],["4倍柔化","4xScaleHQ.glsl"],["CRT模式","crt-aperture.glsl"],["CRT简化","crt-easymode.glsl"],["CRT模糊","crt-geom.glsl"]]}};ABOUT='<div class="gba-about"><h3>说明</h3><p class="gba-tl"><b>作弊代码:</b>目前测试成功的只有 类似这种"F3A9A86D 4E2629B4" 如果代码前面有#那么该行不会生效！</p><p class="gba-tl"><b>翻译API:</b>目前的跨域接口是我之前服务搭建的的，如果我的服务器到期将无法使用，如果资源的朋友，不妨共享个接口。</p><p>有兴趣搭建并分享请到<a href="https://github.com/nenge123/vba_next_wasm/issues" target="_blank">https://github.com/nenge123/vba_next_wasm/issues</a></p><p class="gba-tl"><b>离线开关:开启后,即便无网络也会运行，相反不会再更新最新文件。</b></p><p class="gba-tl"><b>快照:</b>保存当前的room的默认初始状态</p><p class="gba-tl"><b>RTC:</b>必须首次运行绿宝石或者红宝石,如果默认启动了怎么办？点击“刷新”按钮即可。</p><p class="gba-tl"><b>手柄设置:</b>请根据右侧提示设置</p><p class="gba-tl"><h3>视频录制:只有电脑可用！</h3>无声音的，不要问原因，我这三流水平折腾了好几天，结果还是得个吉，那就把这个吉送给各位吧，祝各位玩的开心，新年大吉大利。凑合着用吧。</p><p><br><br><br><br><br><img src="zan.jpg" title=""></p></div>'}(NengeApp),new class{constructor(t){t.DATA=this,this.Module=t.Module,this.config=e=>t.CONFIG[e],this.music=t.CONFIG["do-music"],this.setGameName=e=>{t.GameName=e}}get cwrap(){return this.Module.cwrap}get FS(){return this.Module.FS}get HEAPU8(){return this.Module.HEAPU8}get STATE(){let t=this.cwrap("get_state_info","string",[])().split("|");return t[1]?new Uint8Array(this.HEAPU8.subarray(t[1]>>0,(t[0]>>0)+(t[1]>>0))):null}set STATE(t){this.stateFile=!0,this.FS.writeFile("/"+this.stateName,t),t=null,this.loadState(),this.Module.resumeMainLoop()}get SRM(){return new Uint8Array(this.HEAPU8.subarray(this.Module.SRM_POS,this.Module.SRM_POS+139264))}set SRM(t){this.FS.createDataFile("/",this.srmName,t||new Uint8Array(139264),!0,!1),this.Module._event_load_save_files(),this.FS.unlink("/"+this.srmName),this.Module._system_restart()}get SCREEN(){this.cwrap("cmd_take_screenshot","",[])();let t=this.FS.readFile("screenshot.png");return this.FS.unlink("/screenshot.png"),t}get stateName(){return this.gameName.replace(".gba",".state")}get srmName(){return this.gameName.replace(".gba",".srm")}loadState(t){this.stateFile&&(this.cwrap("load_state","number",["string","number"])(this.stateName,0),this.FS.unlink("/"+this.stateName),this.stateFile=!1),t&&(this.FS.unlink("/"+this.gameName),this.FS.unlink("/"+this.srmName))}AddROOM(t,e,a,s){if(s&&this.setGameName(s),this.gameName)this.Module.pauseMainLoop(),this.HEAPU8.set(new Uint8Array(t),this.Module.ROOM_POS),this.AddSRM(e,a,!1),this.Module.resumeMainLoop();else{this.gameName="game.gba",this.Module.ROOM_POS+=t.length+32,this.FS.createDataFile("/",this.gameName,new Uint8Array(t),!0,!1),this.AddSRM(e,a,!0);let s=["/"+this.gameName,"2b35cacf70aef5cbb3f38c0bb20e488cc8ad0c350400499a0"];"undefined"!=typeof EJS_DEBUG_XX&&!0===EJS_DEBUG_XX&&s.unshift("-v"),this.Module.callMain(s),this.SetShader(),this.loadState(!0),this.Module.resumeMainLoop()}t=null,e=null,a=null}AddSRM(t,e,a){a?(this.FS.createDataFile("/",this.srmName,t||new Uint8Array(139264),!0,!1),e&&(this.stateFile=!0,this.FS.writeFile("/"+this.stateName,e))):(e||(this.SRM=t),e?this.STATE=e:this.Module.resumeMainLoop()),t=null,e=null}SHADER_MODE={"2xScaleHQ.glsl":["false","source"],"4xScaleHQ.glsl":["false","source"],"crt-aperture.glsl":["false","source"],"crt-easymode.glsl":["false","source"],"crt-geom.glsl":["false","source"]};SetShader(){let t=this.config("do-shader");if(!t)return;let e="shaders = "+t.length+"\n";for(let a=0;a<t.length;a++){let s=t[a];s&&(e+=`shader${a} = "${s}"\nfilter_linear${a} = ${this.SHADER_MODE[s][1]}\nscale_type_${a} = ${this.SHADER_MODE[s][2]}\n`)}this.FS.writeFile("/shader/shader.glslp",e),this.ShaderEnable(t.length>0?1:0)}ShaderEnable(t){let e=this.config("do-shader");null==t&&(t=e&&e.length>0?1:0),this.cwrap("shader_enable","null",["number"])(t)}}(NengeApp),new class{constructor(t){this.BTN=t.BtnMap,this.RUNBTN=t=>{let e=t.split("-");this.BTN[e[0]]&&(e[1]?this.BTN[e[0]][e[1]]():this.BTN[e[0]]())},t.CONFIG.KeyGamePad&&(t.KEY.KeyGamePad=t.CONFIG.KeyGamePad),this.KEY=t.KEY,t.upload=t=>{let e=Math.random(),a=document.querySelector(".gba-file-upload");this.cbkey[e]=t,a.setAttribute("data-upload",e),a.click()},this.upLoad=e=>{let a=e.files[0],s=e.getAttribute("data-upload");if(e.removeAttribute("data-upload"),!a)return;e.value="";let n=new FileReader;n.onload=e=>{t.CheckFile(e.target.result,a.name).then((t=>{s&&this.cbkey[s]&&(this.cbkey[s](t,a.name),delete this.cbkey[s]),e.target.result,n=null,a=null}))},n.readAsArrayBuffer(a)};let e=t.Module;this.gamepadStr={"加速":t=>this.BTN.do.forward(),"切换":t=>this.BTN.state.switch(),"即读":t=>this.BTN.state.load(),"即存":t=>this.BTN.state.save(),"重启":t=>this.BTN.state.reset(),"快照":t=>this.BTN.db.UpdateRoom()},window.addEventListener("gamepadconnected",(t=>{e.preMainLoop=t=>{this.gamepad()}})),window.addEventListener("gamepaddisconnected",(t=>{let a=navigator.getGamepads();if(a)for(var s in a)if(a[s].connected)return;e.preMainLoop=t=>{}})),window.addEventListener("change",(e=>{let a=e.target;if(a){let e=this.ELM_ATTR(a,"data-gamepad-index"),s=this.ELM_ATTR(a,"data-state-key"),n=this.ELM_ATTR(a,"data-upload");if(null!=e){let s=a.value;return""!=s&&"null"!=s||(s=null),null!=s&&(NaN!=Number(s)?s=this.KEY.KeyMap[s]?Number(s):null:this.gamepadStr[s]||(s=null)),a.value=s||"null",t.KEY.KeyGamePad[e]=a.value,t.setConfig({KeyGamePad:this.KEY.KeyGamePad}),!1}null!=s?(t.setConfig({stateKey:s}),this.BTN.closelist()):null!=n&&this.upLoad(a)}}),!1);let a={Escape:"do-forward",Tab:"translate-load",Backspace:"do-reset",F1:"state-load",F4:"state-save"};["keyup","keydown"].forEach((t=>document.addEventListener(t,(t=>{let e=this.KEY._KeyCode[t.code];if(t.target){let e=t.target;if(null!=this.ELM_ATTR(e,"data-key-index"))return void(["Escape","Tab","F1","F4","Backspace"].includes(t.code)?["Escape","F1","F4","Backspace"].includes(t.code)&&this.stopEvent(t):(e.value=t.code,this.stopEvent(t)))}if(!document.querySelector(".gba-keyMap"))return a[t.code]&&(this.stopEvent(t),"keyup"==t.type)?this.RUNBTN(a[t.code]):void(null!=e&&(this.stopEvent(t),this.KEY.sendState(e,"keyup"==t.type?0:1)))}),{passive:!1}))),window.addEventListener("beforeunload",(t=>this.BTN.db.UpdateRoom())),null!=document.visibilityState?document.addEventListener("visibilitychange",(t=>{this.Module&&this.Module.noExitRuntime&&!this.Module.runMusic&&"hidden"===document.visibilityState&&this.BTN.db.UpdateRoom()}),!1):window.addEventListener("pagehide",(t=>{if(t.persisted)return this.BTN.db.UpdateRoom()}),!1),this.clickEvent()}cbkey={};Timer={};ELM_ATTR(t,e){if(null!=t&&null!=t&&1==t.nodeType)return t.getAttribute(e)}stopEvent(t,e){return e||t.preventDefault(),t.stopPropagation(),!1}clickEvent(){let t=["mousedown","mouseup","mouseout","mousemove"],e=["gba-pic","gba-body","gba-ctrl","gba-msg"];"ontouchstart"in document&&(t=["touchstart","touchmove","touchcancel","touchend"]),t.forEach((t=>document.addEventListener(t,(t=>{let a=t.changedTouches&&t.changedTouches[0],s=a&&document.elementFromPoint(a.pageX,a.pageY)||t.target,n={},i=t.type,l=this.ELM_ATTR(s,"data-k"),r=this.ELM_ATTR(s,"data-btn");if(r){if(["mouseup","touchend"].includes(i)&&("touchend"!=i||s==t.target)){r=r.toLowerCase();let e=r.split("-");e[1]?this.BTN[e[0]][e[1]](t):this.BTN[r](t)}return this.stopEvent(t,1)}if(l)if(t.touches&&t.touches.length>0){for(var o=0;o<t.touches.length;o++){var d=t.touches[o],u=this.ELM_ATTR(document.elementFromPoint(d.pageX,d.pageY),"data-k");if(u){let t=this.KEY.get(u);null!=t?n[t]=1:"ul"==u||"ur"==u?(n[4]=1,n[6]=1):("dl"==u||"dr"==u)&&(n[5]=1,n[7]=1)}}this.stopEvent(t,1)}else if("mouseup"==i)this.mousedownHold=!1;else if(1==this.mousedownHold||"mousedown"==i)return this.mousedownHold=!0,n[this.KEY.get(l)]=1,this.KEY.SetState(n),this.stopEvent(t,1);if(this.KEY.SetState(n),e.includes(s.className)||["body","html"].includes(s.tagName.toLowerCase()))return this.stopEvent(t)}),{passive:!1})))}gamepad(){let t,e=navigator.getGamepads();for(let a=0;a<e.length;a++){let s=e[a];if(s&&s.connected){let e=s.axes,a=s.buttons;for(let e=0;e<a.length;e++){let s=this.KEY.KeyGamePad[e],n=document.querySelector(`[data-gamepad-index="${e}"]`);a[e].value>.5?n?n.classList.add("active"):"number"==typeof s?(t||(t={}),t[s]=1):"string"==typeof s&&this.gamepadStr[s]&&(clearTimeout(this.Timer[s]),this.Timer[s]=setTimeout((()=>{this.gamepadStr[s]()}),60)):n&&n.classList.remove("active")}for(let a=0;a<e.length;a++){let s=parseFloat(e[a]),n=0;s<-.5&&(n+=1),s>.5&&(n+=2),0!=n&&(a%2==0?(t||(t={}),n+5==6?t[6]=1:t[7]=1):a%2==1&&(t||(t={}),n+3==4?t[4]=1:t[5]=1))}}}t?(this.KEY.SetState(t),this.keyState=t):this.keyState&&(this.keyState=null,this.KEY.SetState({})),t=null}}(NengeApp);